{"is_source_file": true, "format": "Dart", "description": "This file defines the PushNotificationsService class, which manages Firebase Cloud Messaging (FCM) token retrieval and message streams for a Flutter application. It handles requesting permission, obtaining the device token, and providing streams for foreground and background message handling.", "external_files": ["../firebase_service.dart"], "external_methods": ["FirebaseService.isInitialized", "FirebaseMessaging.instance", "FirebaseMessaging.requestPermission", "FirebaseMessaging.getToken", "FirebaseMessaging.onMessage", "FirebaseMessaging.onMessageOpenedApp"], "published": ["PushNotificationsService"], "classes": [{"name": "PushNotificationsService", "description": "A service class for managing push notifications via Firebase Cloud Messaging, including token handling and message stream subscriptions."}], "methods": [{"name": "PushNotificationsService", "description": "Constructor for initializing the push notifications service."}, {"name": "getToken", "description": "Retrieves the FCM token asynchronously if Firebase is initialized, with permission handling and error catching."}, {"name": "onMessage", "description": "Returns a stream of messages received when the app is in the foreground, or an empty stream if not initialized."}, {"name": "onMessageOpenedApp", "description": "Returns a stream for messages that open the app from a background state, or an empty stream if not initialized."}], "calls": ["FirebaseService.isInitialized", "FirebaseMessaging.requestPermission", "FirebaseMessaging.getToken", "FirebaseMessaging.onMessage", "FirebaseMessaging.onMessageOpenedApp"], "search-terms": ["FirebaseMessaging", "push notifications", "FCM token", "message streams", "foreground notifications", "background notifications", "push notification service"], "state": 2, "file_id": 67, "knowledge_revision": 189, "git_revision": "", "revision_history": [{"179": ""}, {"189": ""}], "hash": "ca2a1c9d69d0e478a63141eb1851c609", "format-version": 4, "code-base-name": "event_manager_frontend", "filename": "event_manager_frontend/lib/services/notifications/push_notifications_service.dart"}